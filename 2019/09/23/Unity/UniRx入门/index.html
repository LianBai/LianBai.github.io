<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>UniRx入门 | LianBai</title>
  <meta name="keywords" content=" UniRx ">
  <meta name="description" content="UniRx入门 | LianBai">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta property="og:type" content="website">
<meta property="og:title" content="categories">
<meta property="og:url" content="http://yoursite.com/categories/index.html">
<meta property="og:site_name" content="LianBai">
<meta property="og:locale">
<meta property="article:published_time" content="2018-05-12T01:20:03.000Z">
<meta property="article:modified_time" content="2021-12-27T03:39:09.486Z">
<meta property="article:author" content="LianBai">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/atom-dark.css?v=1.0.1" rel="stylesheet">

<link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1" ></script>

<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.0.1" ></script>

<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="LianBai" type="application/atom+xml">
</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
  <input class="theme_blog_path" value="">
</div>
<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>LianBai</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/lianbai" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
        <a title="email" href="mailto:841774407@qq.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=841774407&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
</div>




<ul>
    <li><div class="all active">全部文章<small>(30)</small></div></li>
    
        
            
            <li><div data-rel="Unity">Unity<small>(8)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Unity专栏">Unity专栏<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Unity杂文">Unity杂文<small>(11)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="其他">其他<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Unity框架">Unity框架<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="编程语言">编程语言<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="计算机基础">计算机基础<small>(2)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">关于</a><a style="width: 50%"  class="friends">友链</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="30">
<input type="hidden" id="yelog_site_word_count" value="68.6k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://lianbai.github.io/">Lianbai</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode==13){return false;}">
        <input class="search" type="text" placeholder="以 in: 开头进行全文搜索" autocomplete="off"id="local-search-input" >
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">VR</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">IOC</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color1">NUnit</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">UGUI</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">Shader</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color1">UniRx</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">AR</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">Odin Inspector</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">插件</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">Lua</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">AssetBundle</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color1">Unity编辑器扩展</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">JSON</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">Unity4IOS</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">C#-Property</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">海外Google</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">Prefab</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color1">XMind</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">博客搭建</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">LBFramework</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">网址</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">JAVA</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">BAT</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">git</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">操作系统</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">网络原理</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
		
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
		<a 
        
        <a  class="Unity "
           href="/2018/05/12/Unity/XLua/"
           data-tag="Lua"
           data-author="" >
            <span class="post-title" title="XLua">XLua</span>
            <span class="post-date" title="2018-05-12 09:33:32">2018/05/12</span>
        </a>
        
        <a  class="计算机基础 "
           href="/2018/05/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E6%95%99%E7%A8%8B/"
           data-tag="网络原理"
           data-author="" >
            <span class="post-title" title="计算机网络原理教程">计算机网络原理教程</span>
            <span class="post-date" title="2018-05-16 16:21:13">2018/05/16</span>
        </a>
        
        <a  class="Unity "
           href="/2018/06/01/Unity/Vuforia%E6%95%99%E7%A8%8B/"
           data-tag="AR"
           data-author="" >
            <span class="post-title" title="Vuforia教程">Vuforia教程</span>
            <span class="post-date" title="2018-06-01 10:40:37">2018/06/01</span>
        </a>
        
        <a  class="计算机基础 "
           href="/2018/06/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%95%99%E7%A8%8B/"
           data-tag="操作系统"
           data-author="" >
            <span class="post-title" title="计算机操作系统教程">计算机操作系统教程</span>
            <span class="post-date" title="2018-06-03 09:13:04">2018/06/03</span>
        </a>
        
        <a  class="Unity "
           href="/2018/08/19/Unity/HTC-VIVE/"
           data-tag="VR"
           data-author="" >
            <span class="post-title" title="HTC VIVE">HTC VIVE</span>
            <span class="post-date" title="2018-08-19 15:03:46">2018/08/19</span>
        </a>
        
        <a  class="编程语言 "
           href="/2018/08/19/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/JAVA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
           data-tag="JAVA"
           data-author="" >
            <span class="post-title" title="JAVA学习笔记">JAVA学习笔记</span>
            <span class="post-date" title="2018-08-19 17:42:39">2018/08/19</span>
        </a>
        
        <a  class="其他 "
           href="/2018/08/26/%E5%85%B6%E4%BB%96/XMind%E6%95%99%E7%A8%8B/"
           data-tag="XMind"
           data-author="" >
            <span class="post-title" title="XMind教程">XMind教程</span>
            <span class="post-date" title="2018-08-26 09:27:54">2018/08/26</span>
        </a>
        
        <a  class="Unity "
           href="/2019/09/20/Unity/Shader/"
           data-tag="Shader"
           data-author="" >
            <span class="post-title" title="Shader">Shader</span>
            <span class="post-date" title="2019-09-20 11:05:18">2019/09/20</span>
        </a>
        
        <a  class="其他 "
           href="/2019/09/21/%E5%85%B6%E4%BB%96/github-hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"
           data-tag="博客搭建"
           data-author="" >
            <span class="post-title" title="github+hexo博客搭建">github+hexo博客搭建</span>
            <span class="post-date" title="2019-09-21 10:44:45">2019/09/21</span>
        </a>
        
        <a  class="Unity "
           href="/2019/09/23/Unity/NUnit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"
           data-tag="NUnit"
           data-author="" >
            <span class="post-title" title="NUnit单元测试">NUnit单元测试</span>
            <span class="post-date" title="2019-09-23 09:00:31">2019/09/23</span>
        </a>
        
        <a  class="Unity "
           href="/2019/09/23/Unity/UGUI/"
           data-tag="UGUI"
           data-author="" >
            <span class="post-title" title="UGUI">UGUI</span>
            <span class="post-date" title="2019-09-23 09:00:31">2019/09/23</span>
        </a>
        
        <a  class="Unity "
           href="/2019/09/23/Unity/UniRx%E5%85%A5%E9%97%A8/"
           data-tag="UniRx"
           data-author="" >
            <span class="post-title" title="UniRx入门">UniRx入门</span>
            <span class="post-date" title="2019-09-23 09:00:31">2019/09/23</span>
        </a>
        
        <a  class="Unity "
           href="/2019/09/27/Unity/IOC%E5%85%A5%E9%97%A8/"
           data-tag="IOC"
           data-author="" >
            <span class="post-title" title="IOC入门">IOC入门</span>
            <span class="post-date" title="2019-09-27 09:10:01">2019/09/27</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2019/09/28/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%94AssetBundle%E8%87%AA%E5%8A%A8%E6%A0%87%E8%AE%B0/"
           data-tag="AssetBundle"
           data-author="" >
            <span class="post-title" title="Unity杂文——AssetBundle自动标记">Unity杂文——AssetBundle自动标记</span>
            <span class="post-date" title="2019-09-28 16:35:10">2019/09/28</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2019/09/28/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%94IOS%E5%90%8E%E5%8F%B0%E6%8E%A8%E9%80%81/"
           data-tag="Unity4IOS"
           data-author="" >
            <span class="post-title" title="Unity杂文——IOS后台推送">Unity杂文——IOS后台推送</span>
            <span class="post-date" title="2019-09-28 17:09:59">2019/09/28</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2019/09/28/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%942D%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6%E9%9B%86%E5%90%88/"
           data-tag="插件"
           data-author="" >
            <span class="post-title" title="Unity杂文——2D游戏开发常用插件集合">Unity杂文——2D游戏开发常用插件集合</span>
            <span class="post-date" title="2019-09-28 20:50:08">2019/09/28</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2019/09/30/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%94JSON%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8C%96%E4%B8%BAExcel%E8%A1%A8%E6%A0%BC/"
           data-tag="JSON"
           data-author="" >
            <span class="post-title" title="Unity杂文——JSON数据转化为Excel表格">Unity杂文——JSON数据转化为Excel表格</span>
            <span class="post-date" title="2019-09-30 10:41:20">2019/09/30</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2019/09/30/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%94AssetDatabase%E8%B5%84%E6%BA%90%E6%95%B0%E6%8D%AE%E5%BA%93/"
           data-tag="Unity编辑器扩展"
           data-author="" >
            <span class="post-title" title="Unity杂文——AssetDatabase资源数据库">Unity杂文——AssetDatabase资源数据库</span>
            <span class="post-date" title="2019-09-30 14:22:19">2019/09/30</span>
        </a>
        
        <a  class="其他 "
           href="/2019/10/14/%E5%85%B6%E4%BB%96/%E5%B8%B8%E7%94%A8%E7%BD%91%E7%AB%99%E7%BD%91%E5%9D%80/"
           data-tag="网址"
           data-author="" >
            <span class="post-title" title="常用网站网址">常用网站网址</span>
            <span class="post-date" title="2019-10-14 13:20:04">2019/10/14</span>
        </a>
        
        <a  class="Unity专栏 "
           href="/2019/10/29/Unity%E4%B8%93%E6%A0%8F/Odin-Inspector%E5%85%A5%E9%97%A8/"
           data-tag="Odin Inspector"
           data-author="" >
            <span class="post-title" title="Odin Inspector入门">Odin Inspector入门</span>
            <span class="post-date" title="2019-10-29 15:41:56">2019/10/29</span>
        </a>
        
        <a  class="编程语言 "
           href="/2019/11/24/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/bat%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
           data-tag="BAT"
           data-author="" >
            <span class="post-title" title="bat学习笔记">bat学习笔记</span>
            <span class="post-date" title="2019-11-24 10:05:06">2019/11/24</span>
        </a>
        
        <a  class="编程语言 "
           href="/2019/11/24/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="git学习笔记">git学习笔记</span>
            <span class="post-date" title="2019-11-24 11:09:11">2019/11/24</span>
        </a>
        
        <a  class="Unity框架 "
           href="/2020/07/30/Unity%E6%A1%86%E6%9E%B6/LBFramwork%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA/"
           data-tag="LBFramework"
           data-author="" >
            <span class="post-title" title="LBFramwork框架搭建">LBFramwork框架搭建</span>
            <span class="post-date" title="2020-07-30 14:40:08">2020/07/30</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2021/04/19/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%94UGUI%E4%B8%AD%E7%B2%92%E5%AD%90%E7%9A%84%E9%81%AE%E7%BD%A9%E4%B8%8E%E8%A3%81%E5%89%AA/"
           data-tag="UGUI"
           data-author="" >
            <span class="post-title" title="Unity杂文——UGUI中粒子的遮罩与裁剪">Unity杂文——UGUI中粒子的遮罩与裁剪</span>
            <span class="post-date" title="2021-04-19 10:48:13">2021/04/19</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2021/04/20/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%94UGUI%E5%9F%BA%E4%BA%8E%E5%9B%BE%E9%9B%86%E7%9A%84shader%E9%81%AE%E7%BD%A9/"
           data-tag="UGUI"
           data-author="" >
            <span class="post-title" title="Unity杂文——UGUI基于图集的shader遮罩">Unity杂文——UGUI基于图集的shader遮罩</span>
            <span class="post-date" title="2021-04-20 14:25:21">2021/04/20</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2021/04/30/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8EUGUI%E5%AE%9E%E7%8E%B0%E6%80%A7%E8%83%BD%E6%9B%B4%E5%A5%BD%E7%9A%84%E5%9C%86%E5%BD%A2Image/"
           data-tag="UGUI"
           data-author="" >
            <span class="post-title" title="Unity杂文——基于UGUI实现性能更好的圆形Image">Unity杂文——基于UGUI实现性能更好的圆形Image</span>
            <span class="post-date" title="2021-04-30 11:00:36">2021/04/30</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2021/07/09/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%94%E6%B5%B7%E5%A4%96%E5%BC%80%E5%8F%91%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0/"
           data-tag="海外Google"
           data-author="" >
            <span class="post-title" title="Unity杂文——海外开发踩坑笔记">Unity杂文——海外开发踩坑笔记</span>
            <span class="post-date" title="2021-07-09 18:25:32">2021/07/09</span>
        </a>
        
        <a  class=""
           href="/2021/12/27/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2021-12-27 11:39:09">2021/12/27</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2021/12/30/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%94%E8%A7%A3%E5%86%B3Unity%E4%BF%AE%E6%94%B9Prefab%E7%9A%84%E5%8F%82%E6%95%B0%E4%B8%8D%E7%94%9F%E6%95%88%EF%BC%8C%E6%97%A0%E6%B3%95%E4%BF%9D%E5%AD%98/"
           data-tag="Prefab"
           data-author="" >
            <span class="post-title" title="Unity杂文——解决Unity修改Prefab的参数不生效，无法保存">Unity杂文——解决Unity修改Prefab的参数不生效，无法保存</span>
            <span class="post-date" title="2021-12-30 10:06:39">2021/12/30</span>
        </a>
        
        <a  class="Unity杂文 "
           href="/2022/01/07/Unity%E6%9D%82%E6%96%87/Unity%E6%9D%82%E6%96%87%E2%80%94%E2%80%94%E6%89%A9%E5%B1%95%E5%8F%98%E9%87%8F%E5%A2%9E%E5%8A%A0OnValueChange%E5%8A%9F%E8%83%BD/"
           data-tag="C#-Property"
           data-author="" >
            <span class="post-title" title="Unity杂文——扩展变量增加OnValueChange功能">Unity杂文——扩展变量增加OnValueChange功能</span>
            <span class="post-date" title="2022-01-07 14:00:09">2022/01/07</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-Unity/UniRx入门" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">UniRx入门</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            
                <a href="javascript:" data-rel="Unity">Unity</a>
            
        </span>
        
        
        <span class="tag">
            
            <a href="javascript:" class="color1">UniRx</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        创建时间:<time class="date" title='更新时间: 2021-12-27 11:39:09'>2019-09-23 09:00</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:3.8k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#UniRx%E7%AE%80%E4%BB%8B"><span class="toc-text">UniRx简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-text">响应式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95"><span class="toc-text">扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8Rx"><span class="toc-text">为什么用Rx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-text">案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-text">代码分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-text">观察者模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Where"><span class="toc-text">Where</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UniRx-%E4%B8%AD%E7%9A%84-Linq-%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">UniRx 中的 Linq 操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Subscribe"><span class="toc-text">Subscribe</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%A9%E5%B1%95-1"><span class="toc-text">扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#TimeSpan-%E5%BB%B6%E8%BF%9F%E5%8A%9F%E8%83%BD"><span class="toc-text">TimeSpan(延迟功能)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AddTo-MonoBehaviour"><span class="toc-text">AddTo(MonoBehaviour)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IDisposable"><span class="toc-text">IDisposable</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Subject%E4%BD%BF%E7%94%A8"><span class="toc-text">Subject使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Subject-Observable"><span class="toc-text">Subject Observable</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Subjecrt%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">Subjecrt是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Subject-%E4%B8%8E%E5%A7%94%E6%89%98%E7%9B%B8%E6%AF%94%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C%EF%BC%9F"><span class="toc-text">Subject 与委托相比有什么不同？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OnNext-%E4%B8%8E-IObserver"><span class="toc-text">OnNext 与 IObserver</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OnNext%E7%AE%80%E4%BB%8B"><span class="toc-text">OnNext简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OnNext-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">OnNext 是什么？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IObserver"><span class="toc-text">IObserver</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OnComplete"><span class="toc-text">OnComplete</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OnNext"><span class="toc-text">OnNext</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OnError"><span class="toc-text">OnError</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ReactiveProperty"><span class="toc-text">ReactiveProperty</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#C-%E4%B8%AD%E7%9A%84Property"><span class="toc-text">C#中的Property</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UniRx%E4%B8%AD%E7%9A%84Property"><span class="toc-text">UniRx中的Property</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Skip"><span class="toc-text">Skip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ReactiveCollection"><span class="toc-text">ReactiveCollection</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EUniRx%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-text">基于UniRx的事件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E4%B8%80"><span class="toc-text">案例一</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E4%BA%8C%EF%BC%88%E8%87%AA%E5%86%99%EF%BC%89"><span class="toc-text">案例二（自写）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%93%8D%E4%BD%9C"><span class="toc-text">网络操作</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    <div class="article-entry" itemprop="articleBody">
      
        <pre><code>UniRx - Unity响应式编程插件  
插件作者Yoshifumi Kawai(neuecc) 
本篇参照博客：1.凉鞋小班博客
            2.https://blog.csdn.net/zhenghongzhi6/article/details/79229585
</code></pre>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h2 id="UniRx简介"><a href="#UniRx简介" class="headerlink" title="UniRx简介"></a>UniRx简介</h2><p>UniRx 是 Unity Reactive Extensions 的缩写，意思是 Unity 的响应式扩展集。重写了.Net的响应式扩展。<br>.Net官方的Rx很棒，但是在Unity中无法使用，并且与IOS的IL2CPP有兼容性问题。这个库这些问题并且添加了一些Unity专属的工具类。<br>支持的平台有：PC/Mac/Android/iOS/WP8/WindowsStore/等等，并且支持Unity4.6之后的所有版本。  </p>
<p><strong>UniRx 在 Unity Asset Store 的地址(免费)：<a target="_blank" rel="noopener" href="http://u3d.as/content/neuecc/uni-rx-reactive-extensions-for-unity/7tT">http://u3d.as/content/neuecc/uni-rx-reactive-extensions-for-unity/7tT</a></strong>  </p>
<h2 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h2><p>响应式是什么意思：一旦A做了事情，B就得到了通知。<br>为什么unirx是响应式：因为UniRx通过观察者模式实现了这种响应。  </p>
<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p>在C#语法中对静态this关键字进行了扩展，类似于Linq的关键字扩展。<br>例：<br>    Observable.EveryUpdate() // 每一帧发送一次通知<br>      .Where(<em>=&gt;Timer.frameCount % 5 == 0) // Linq Where 关键字，每 5 帧发送一次通知<br>      .Subscribe(</em>=&gt;Debug.Log(“Every 5 Frame”)) // 订阅 输出</p>
<h2 id="为什么用Rx"><a href="#为什么用Rx" class="headerlink" title="为什么用Rx"></a>为什么用Rx</h2><p>拿网络操作进行举例：<br>网络操作需要用到WWW和Coroutine。但是使用Coroutine会遇到下面列问题<br>  1.协程不能有返回值，因为返回类型必须是IEnumerator<br>  2.协程不能处理异常，因为 yield return 语句没办法被 try-catch<br>这样就会造成代码大面试的强耦合。<br>游戏循环 (every Update, OnCollisionEnter, etc), 传感器数据 (Kinect, Leap Motion, VR Input, etc.) 都是事件。Rx将事件转化为响应式的序列，通过LINQ操作可以很简单地组合起来，还支持时间操作。  </p>
<p>Unity通常是单线程，但是UniRx可以让多线程更容易。</p>
<p>UniRx 可以简化 uGUI 的编程，所有的UI事件 (clicked, valuechanged, etc) 可以转化为 UniRx 的事件流。  </p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Reactive Extensions 指的就是： 观察者模式 + Linq。</p>
<h1 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h1><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><p>代码如下：</p>
<pre><code>using UnityEngine;
using UniRx;

namespace QF.Master.Example
&#123;
    public class UniRxBasicUsage : MonoBehaviour
    &#123;
        void Start()
        &#123;
            Observable.EveryUpdate()
                .Where(_ =&gt; Time.frameCount % 5 == 0)
                .Subscribe(_=&gt; Debug.Log(&quot;hello&quot;));
        &#125;
    &#125;
&#125;
</code></pre>
<p>运行结果：<br><img src="http://file.liangxiegame.com/7d00ea36-8058-4b6d-87d6-d2e27d2e6cb2.png">  </p>
<h2 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h2><p>主要代码：</p>
<pre><code>Observable.EveryUpdate()
  .Where(_ =&gt; Time.frameCount % 5 == 0)
  .Subscribe(_=&gt; Debug.Log(&quot;hello&quot;));
</code></pre>
<p>代码分为三部分，分别是:</p>
<pre><code>Observable：Observable.EveryUpdate()
Linq 操作符：Where(_ =&gt; Time.frameCount % 5 == 0)
订阅、注册事件的处理：Subscribe(_=&gt; Debug.Log(&quot;Hello&quot;))
</code></pre>
<p>以上是一个 UniRx 的基本使用格式，每个 UniRx 的完整使用，都会包含以上三个部分。</p>
<h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h3><p>观察者模式分别有:观察者（Observer）、主题（Subject）、通知（Notify）、订阅（Subscribe）。<br>Observable 中文的意思是可观察者的，是一个形容词。<br>主题（Subject）就是可观察的主体。<br>对比下列代码</p>
<pre><code>Observable.EveryUpdate()    // Observable
  .Where(_ =&gt; Time.frameCount % 5 == 0)        //可以不写，代表没有限制条件
  .Subscribe(_=&gt; Debug.Log(&quot;hello&quot;));    // Subscribe
</code></pre>
<p>代码中的 EveryUpdate 意思是：每次执行 Update 时，发送一次通知（Notify）。<br>发送的通知由 Subscribe 中的 lambda 表达式接收。  </p>
<h3 id="Where"><a href="#Where" class="headerlink" title="Where"></a>Where</h3><pre><code>Where(_ =&gt; Time.frameCount % 5 == 0)
</code></pre>
<p>Where 是相当于一个条件过滤，意思是，当 Where 方法中的 lambda 表达式返回 true 时，则保留，否则丢弃。<br>Where 是一个 Linq 操作符。<br>举例：</p>
<pre><code>var ages = new int[] &#123; 1,2,3&#125;;
var ageList = ages.Where(age=&gt;age &gt;= 2).ToList();
// 此时 ageList 为 [2,3]
</code></pre>
<h2 id="UniRx-中的-Linq-操作符"><a href="#UniRx-中的-Linq-操作符" class="headerlink" title="UniRx 中的 Linq 操作符"></a>UniRx 中的 Linq 操作符</h2><p>Linq 有大量的类似 Where 这样的操作符，而 UniRx 也同样支持了大量的操作符，不过 UniRx 是在自己的库中实现的，与 C# 的 Linq 操作符并不是完全一致的。<br>我们知道 C# 中的 Linq 操作符是查询内存数据用的，这里的内存数据指的是各种可枚举集合（IEnumrable），比如 Array,Queue,Stack,Dictionary 等所有实现 IEnumrable 接口的类。<br>而 UniRx 中的 Linq 操作符是用来查询各种事件源的 (IObservable)，比如 Observable.EveryUpdate() 返回的对象就是一个 IObservable 对象。<br>C# 中的 Where 操作符是过滤一个一个数据。<br>而 UniRx 中的 Where 操作符是过滤一个一个通知（事件）  </p>
<h2 id="Subscribe"><a href="#Subscribe" class="headerlink" title="Subscribe"></a>Subscribe</h2><pre><code>.Subscribe(_=&gt; Debug.Log(&quot;hello&quot;));
</code></pre>
<p>Subscribe就是订阅的意思，在代码中其实是被订阅的意思，意思就是被<strong>观察者</strong>订阅。<br>代码结构目前是：</p>
<pre><code>Observable.Linq.Subcribe(callback)
</code></pre>
<p>讲到这里，观察者模式中，我们看到了<strong>主题（Observable）、订阅（Subscribe）、通知（Notify）</strong>，但是还没有**观察者(Observer)**。<br>我们来看看Subscribe的底层是如何定义的  </p>
<pre><code>public static XXXYYYZZZ Subscribe(IObserver observer)
&#123;
  ...
&#125;
</code></pre>
<p>Subscribe 的参数实际上就是一个观察者，而在最上层的 API 中，UniRx 将 Observer 简化为了一个委托。<br><img src="http://file.liangxiegame.com/a682675e-98a6-4c60-af78-5d5801f066f1.png">  </p>
<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>UniRx 的最核心的三个概念分别是：<br>Observable（可观察的）<br>Linq 操作符<br>Subscribe（Observer）<br>这是UniRx最基础的三个概念，只要熟练掌握这三个概念就可以运用UniRx的所有API了。<br>niRx 有大量的 Observable 和 Linq 操作符，我们学习的 EveryUpdate 只是其中一个 Observable。  </p>
<h1 id="扩展-1"><a href="#扩展-1" class="headerlink" title="扩展"></a>扩展</h1><h2 id="TimeSpan-延迟功能"><a href="#TimeSpan-延迟功能" class="headerlink" title="TimeSpan(延迟功能)"></a>TimeSpan(延迟功能)</h2><p>代码如下：</p>
<pre><code>using UnityEngine;
using UniRx;
using System;
public class UniRxTimerExample : MonoBehaviour 
&#123;
    void Start () 
    &#123;
        Debug.Log(&quot;此时:&quot; + DateTime.Now);

        Observable.Timer(TimeSpan.FromSeconds(2.0f))
             .Subscribe(_=&gt;Debug.Log(&quot;此时:&quot; + DateTime.Now));
    &#125;
&#125;
</code></pre>
<h2 id="AddTo-MonoBehaviour"><a href="#AddTo-MonoBehaviour" class="headerlink" title="AddTo(MonoBehaviour)"></a>AddTo(MonoBehaviour)</h2><p>上述延迟有个问题，就是如果延迟期间gameobject被销毁，就会访问到NULL数据<br>UniRx 提供了一个方案：生命周期绑定<br>当 GameObject 销毁时，自动销毁延时任务：AddoTo(MonoBehaviour)  </p>
<pre><code>using UnityEngine;
using UniRx;
using System;
public class UniRxTimerExample : MonoBehaviour 
&#123;
    void Start () 
    &#123;
        Debug.Log(&quot;此时:&quot; + DateTime.Now);

        Observable.Timer(TimeSpan.FromSeconds(2.0f))
            .Subscribe(_=&gt; Debug.Log(&quot;此时:&quot;  + DateTime.Now))
            .AddTo(this);

        Observable.Timer(TimeSpan.FromSeconds(0.5f))
            .Subscribe(_=&gt; Destroy(gameObject));
    &#125;
&#125;
</code></pre>
<p>运行的结果:(2s后就没有输出了)<br><img src="http://file.liangxiegame.com/64db9c51-30fa-458c-bc64-366bfa4d6b3a.png"></p>
<h2 id="IDisposable"><a href="#IDisposable" class="headerlink" title="IDisposable"></a>IDisposable</h2><p>而 AddTo 实际上是 UniRx 对 IDisposable(.NET中用于释放对象资源的接口) 的一个静态扩展，也就是说所有的实现 IDisposable 接口的对象都可以使用 AddTo 将销毁绑定到 MonoBehaviour 或 GameObject 上。<br>而 Observbale.Timer 在 Subscribe 之后能够调用 AddTo 是因为 Subscribe 方法返回了一个 IDisposable 对象。  </p>
<pre><code>public static IDisposable Subscribe&lt;T&gt;(this IObservable&lt;T&gt; source, Action&lt;T&gt; onNext)
&#123;
    ...
&#125;
</code></pre>
<p>使用 IDisposable 和 AddTo 这对组合我们可以在做模块或库设计的时候非常容易实现生命周期绑定的功能，IDisposable 实际上可以充当一个卸载过程。 </p>
<h1 id="Subject使用"><a href="#Subject使用" class="headerlink" title="Subject使用"></a>Subject使用</h1><h2 id="Subject-Observable"><a href="#Subject-Observable" class="headerlink" title="Subject Observable"></a>Subject Observable</h2><p>Subject 即主题，UniRx 是提供了具体的 Subject 这个概念的。<br>举例代码如下：  </p>
<pre><code>using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UniRx;

public class UniRxSubjectExample : MonoBehaviour 
&#123;
    void Start () 
    &#123;
        var subject = new Subject&lt;int&gt;();

        subject.Subscribe(number =&gt; &#123;
            Debug.Log(number);
        &#125;);

        subject.OnNext(1);
        subject.OnNext(2);
        subject.OnNext(3);
    &#125;
&#125;
</code></pre>
<p>Subject是一个Observable，是一个事件源，是可以被订阅的(Subscribe).<br>而 Subject 是一个泛型类，可以制定要发送通知的类型。<br>代码中指定了发送类型为int。  </p>
<pre><code>var subject = new Subject&lt;int&gt;();
</code></pre>
<p>而指定什么类型，那么在订阅的时候就会接收到什么类型的数据  </p>
<pre><code>subject.Subscribe(number =&gt; &#123;
  Debug.Log(number);
&#125;);
</code></pre>
<p>一个 subject 光是创建对象和被订阅是没什么用的，要让 subject 发送数据，代码如下:</p>
<pre><code>subject.OnNext(1);
subject.OnNext(2);
subject.OnNext(3);
</code></pre>
<p>运行结果如下：<br><img src="http://file.liangxiegame.com/42e52357-4f57-4b0e-820a-d5c32d4628d8.png">  </p>
<h2 id="Subjecrt是什么？"><a href="#Subjecrt是什么？" class="headerlink" title="Subjecrt是什么？"></a>Subjecrt是什么？</h2><p>在 UniRx 中 Subject 是一个 Observable（事件源），它可以让我们通过做少的代码实现观察者模式。  </p>
<h2 id="Subject-与委托相比有什么不同？"><a href="#Subject-与委托相比有什么不同？" class="headerlink" title="Subject 与委托相比有什么不同？"></a>Subject 与委托相比有什么不同？</h2><p>在使用上，Subject 与委托的使用方式差不多，两者之间共同的地方有：</p>
<blockquote>
<p>需要声明，定义参数类型<br>需要注册、订阅<br>委托需要调用，而 Subject 需要通过 OnNext 发送数据。<br>委托给人的感觉是一根线，而 Subject 给人感觉是一个管道。<br>委托不同的地方有：<br>可以定义多个接收参数<br>接收数据之后比较难以再组织整理  </p>
</blockquote>
<p>Subject 不同的地方有：  </p>
<blockquote>
<p>只能定一个一个参数类型<br>接收数据之后可以使用 Linq 对数据进行再组织整理   </p>
</blockquote>
<h1 id="OnNext-与-IObserver"><a href="#OnNext-与-IObserver" class="headerlink" title="OnNext 与 IObserver"></a>OnNext 与 IObserver</h1><h2 id="OnNext简介"><a href="#OnNext简介" class="headerlink" title="OnNext简介"></a>OnNext简介</h2><p>从前面内容可以推测出Subject 继承了 Observable。<br>真实情况底层代码<strong>Subject</strong>实现了一个<strong>IObservable</strong>接口  </p>
<pre><code>namespace UniRx
&#123;
    public interface IObservable&lt;T&gt;
    &#123;
        IDisposable Subscribe(IObserver&lt;T&gt; observer);
    &#125;
&#125;
</code></pre>
<p>从代码中可以看出**IObservable.Subscribe(IObserver)**结构<br>OnNext 没有在 IObservable 中定义，但是在 IObserver 中定义了，IObserver 代码如下：</p>
<pre><code>using System;

namespace UniRx
&#123;
    public interface IObserver&lt;T&gt;
    &#123;
        void OnCompleted();
        void OnError(Exception error);
        void OnNext(T value);
    &#125;
&#125;
</code></pre>
<p>Subject 既是 Observable 也是 Observer。它同时实现了 IObservable 和 IObserver 两个接口。</p>
<p>这样 Subject 就能做到，既可以被订阅（Subscribe），又可以让我们通过其 OnNext 方法传输数据。</p>
<p>到此，大家可能会比较乱，IObservable 和 IObserver 分不清楚。</p>
<p>没关系，IObservable 和 IObserver 在接下来的文章中会着重介绍，因为它俩是 UniRx 的两个核心接口。</p>
<h2 id="OnNext-是什么？"><a href="#OnNext-是什么？" class="headerlink" title="OnNext 是什么？"></a>OnNext 是什么？</h2><p>OnNext 是 IObserver 定义的 API，在 UniRx 内部，OnNext 是被 IObservable 调用的。当 IObservable 每次发送事件时，都是通过 OnNext 向 IObserver 发送事件了，如下图所示：<br><img src="http://file.liangxiegame.com/e881f6d8-991f-4cda-83c7-d8664526f928.png"><br>而 Subject 既是 IObservable 又是 IObserver 所以既可以通过 OnNext 传输数据，又可以被 Subscribe。<br>Subject 就是这样的一个特殊的存在。 </p>
<h1 id="IObserver"><a href="#IObserver" class="headerlink" title="IObserver"></a>IObserver</h1><p>底层代码：  </p>
<pre><code>using System;

namespace UniRx
&#123;
    public interface IObserver&lt;T&gt;
    &#123;
        void OnCompleted();
        void OnError(Exception error);
        void OnNext(T value);
    &#125;
&#125;
</code></pre>
<h2 id="OnComplete"><a href="#OnComplete" class="headerlink" title="OnComplete"></a>OnComplete</h2><p>OnCompleted意思是，当完成时，也就是说当 Observable 发送完事件时会调用 IObserver 的 OnCompleted 的方法。<br>Observable.EveryUpdate 没有完成的时刻,所以是不会接收Oncomplete事件。<br>在<strong>UniRx</strong>中我们就知道有两种 Observable 了，即<strong>可结束的（比如 Observable.Timer）</strong>和不可结束的<strong>（Observable.EveryUpdate）</strong>。<br>OnCompleted 是在Subscribe 的第二个参数中使用。<br>我们知道 Subscribe 可以传入一个委托，次委托实际上是对应的是 OnNext 事件，那么第二个<strong>无参委托</strong>则是对应的是 OnCompleted 事件。  </p>
<pre><code>using UnityEngine;
using UniRx;
using System;

public class UniRxOnCompletedExample : MonoBehaviour 
&#123;
    void Start () 
    &#123;    
        Observable.Timer(TimeSpan.FromSeconds(3.0f))
            .Subscribe(_ =&gt; Debug.Log(&quot;Delayed 3 seconds&quot;),()=&gt;Debug.Log(&quot;completed&quot;));
    &#125;
&#125;
</code></pre>
<h2 id="OnNext"><a href="#OnNext" class="headerlink" title="OnNext"></a>OnNext</h2><p>Subscribe 的第一个有参委托就是接收的是 OnNext 事件，这里就不多说了。</p>
<h2 id="OnError"><a href="#OnError" class="headerlink" title="OnError"></a>OnError</h2><p>Observable（事件源）会发送一些异常或错误，这个时候错误和异常就会发送到 IObserver 的 OnError 中，而 OnError 的使用也非常简单，即：Subscribe 的第二个<strong>有参委托</strong>接收的就是 OnError 事件  </p>
<h1 id="ReactiveProperty"><a href="#ReactiveProperty" class="headerlink" title="ReactiveProperty"></a>ReactiveProperty</h1><p>ReactiveProperty 即响应式属性，它是一个 Property(属性)，同时也是响应式的，说明它是一个可以被 Subscribe 的 Property。  </p>
<h2 id="C-中的Property"><a href="#C-中的Property" class="headerlink" title="C#中的Property"></a>C#中的Property</h2><pre><code>public class SomeClass
&#123;
  public int Age &#123;get;set;&#125;
&#125;
</code></pre>
<p>SomeClass 中的 Age 是一个 Property（属性）  </p>
<h2 id="UniRx中的Property"><a href="#UniRx中的Property" class="headerlink" title="UniRx中的Property"></a>UniRx中的Property</h2><pre><code>public class SomeClass
&#123;
  public ReactiveProperty&lt;int&gt; Age = new ReactiveProperty&lt;int&gt;();
&#125;
</code></pre>
<p>ReactiveProperty 的作用与 C# 的 Property 作用是一致的，就是可以设置值和获取值。<br>得到值的方法是：<strong>属性名.Value</strong><br>测试代码：</p>
<pre><code>using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UniRx;

public class UniRxReactiveProperty : MonoBehaviour &#123;

    ReactiveProperty&lt;int&gt; mAge = new ReactiveProperty&lt;int&gt;();

    void Start () &#123;

        mAge.Subscribe(age=&gt;Debug.Log(age));

        mAge.Value = 10;
        mAge.Value = 10;
        mAge.Value = 10;
        mAge.Value = 11;
    &#125;
&#125;
</code></pre>
<p>得到结果：<br><img src="http://file.liangxiegame.com/5f57e47e-695e-4490-8b6e-45753ce51715.png"><br>这里多输出了一个 0，这是因为，ReactiveProperty 会把初始默认值当做第一次值改变发送给 Subscribe 的委托。<br>解决方法Skip(1)：</p>
<pre><code> mAge.Skip(1)
     .Subscribe(age=&gt;Debug.Log(age));
</code></pre>
<p>这里我们要注意一下，ReactiveProperty 把初始值当做值改变事件发送是合理的，因为有的时候我们是需要得到初始值的，那么至于大家在使用时需不需要初始值，大家可以自行决定，而屏蔽掉初始值的方式就是通过 Skip 操作符。  </p>
<h2 id="Skip"><a href="#Skip" class="headerlink" title="Skip"></a>Skip</h2><p>skip 是 Linq 的操作符，意思是忽略，而 Skip 的参数是 Count，就是说可以通过 Count 来决定忽略多少个数据、事件。<br>在 ReactiveProperty 的用例代码中，Skip 的 Count 参数为 1，意思是忽略 1 个数据、事件。  </p>
<h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>ReactiveProperty 是一个事件源（Observable），而 Skip 是一个 Linq 操作符。<br>ReactiveProperty 是经常使用的设计工具，笔者常用它来写 Model 层的代码。  </p>
<h1 id="ReactiveCollection"><a href="#ReactiveCollection" class="headerlink" title="ReactiveCollection"></a>ReactiveCollection</h1><p>这是一种List形式的属性，用法和ReactiveProperty差不多：  </p>
<pre><code>public ReactiveCollection&lt;PlayerData&gt; mPlayerDataList = new ReactiveCollection&lt;PlayerData&gt;();
</code></pre>
<p>是支持类似于List的Add一类的函数的。这里先不用做过多的详解   </p>
<h1 id="基于UniRx的事件系统"><a href="#基于UniRx的事件系统" class="headerlink" title="基于UniRx的事件系统"></a>基于UniRx的事件系统</h1><h2 id="案例一"><a href="#案例一" class="headerlink" title="案例一"></a>案例一</h2><p>代码：  </p>
<pre><code>using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using System;
using UniRx;

public class UniRxTypeEventSystem 
&#123;
    /// &lt;summary&gt;
    /// 接口 只负责存储在字典中
    /// &lt;/summary&gt;
    interface IRegisterations
    &#123;

    &#125;

    /// &lt;summary&gt;
    /// 多个注册
    /// &lt;/summary&gt;
    class Registerations&lt;T&gt; : IRegisterations
    &#123;
        /// &lt;summary&gt;
        /// 不需要 List&lt;Action&lt;T&gt;&gt; 了
        /// 因为委托本身就可以一对多注册
        /// &lt;/summary&gt;
        public Subject&lt;T&gt; Subject = new Subject&lt;T&gt;();
    &#125;

    /// &lt;summary&gt;
    /// 
    /// &lt;/summary&gt;
    private static Dictionary&lt;Type, IRegisterations&gt; mTypeEventDict = new Dictionary&lt;Type, IRegisterations&gt;();

    /// &lt;summary&gt;
    /// 注册事件
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;onReceive&quot;&gt;&lt;/param&gt;
    /// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;
    public static Subject&lt;T&gt; GetEvent&lt;T&gt;()
    &#123;
        var type = typeof(T);

        IRegisterations registerations = null;

        if (mTypeEventDict.TryGetValue(type, out registerations))
        &#123;
            var reg = registerations as Registerations&lt;T&gt;;
            return reg.Subject;
        &#125;
        else
        &#123;
            var reg = new Registerations&lt;T&gt;();
            mTypeEventDict.Add(type, reg);
            return reg.Subject;
        &#125;
    &#125;

    /// &lt;summary&gt;
    /// 发送事件
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;t&quot;&gt;&lt;/param&gt;
    /// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;
    public static void Send&lt;T&gt;(T t)
    &#123;
        var type = typeof(T);

        IRegisterations registerations = null;

        if (mTypeEventDict.TryGetValue(type, out registerations))
        &#123;
            var reg = registerations as Registerations&lt;T&gt;;
            reg.Subject.OnNext(t);
        &#125;
    &#125;
&#125;
</code></pre>
<p>调用方法：</p>
<pre><code>using System.Collections;
using System.Collections.Generic;
using System;
using UnityEngine;
using UniRx;

public class UniRxTypeEventSystemTest : MonoBehaviour
&#123;
    class A
    &#123;
    &#125;

    class B
    &#123;
        public int    Age;
        public string Name;
    &#125;

    IDisposable mEventADisposable;

    private void Start()
    &#123;
        mEventADisposable = UniRxTypeEventSystem.GetEvent&lt;A&gt;()
            .Subscribe(ReceiveA); // 可以获取 IDisposable 对象

        UniRxTypeEventSystem.GetEvent&lt;B&gt;()
            .Subscribe(ReceiveB)
            .AddTo(this); // 可以绑定
    &#125;

    void ReceiveA(A a)
    &#123;
        Debug.Log(&quot;received A&quot;);
    &#125;

    void ReceiveB(B b)
    &#123;
        Debug.LogFormat(&quot;received B:&#123;0&#125; &#123;1&#125;&quot;, b.Name, b.Age);
    &#125;

    private void Update()
    &#123;
        if (Input.GetMouseButtonDown(0))
        &#123;
            UniRxTypeEventSystem.Send(new A());
        &#125;

        if (Input.GetMouseButtonDown(1))
        &#123;
            UniRxTypeEventSystem.Send(new B()
            &#123;
                Age = 10,
                Name = &quot;凉鞋&quot;
            &#125;);
        &#125;

        if (Input.GetKeyDown(KeyCode.U))
        &#123;
            mEventADisposable.Dispose();
        &#125;
    &#125;
&#125;
</code></pre>
<h2 id="案例二（自写）"><a href="#案例二（自写）" class="headerlink" title="案例二（自写）"></a>案例二（自写）</h2><pre><code>using System;
using System.Collections;
using System.Collections.Generic;
using QF;
using UniRx;
using UnityEngine;

/// &lt;summary&gt;
/// 接口 只负责存储在字典中
/// &lt;/summary&gt;
interface IRegisterations
&#123;

&#125;
/// &lt;summary&gt;
/// 多个注册
/// &lt;/summary&gt;
class Registerations : IRegisterations
&#123;
    /// &lt;summary&gt;
    /// 委托本身就可以一对多注册
    /// &lt;/summary&gt;
    public Subject&lt;object[]&gt; Subject = new Subject&lt;object[]&gt;();
&#125;
public class MyEventSystem
&#123;
    /// &lt;summary&gt;
    /// 存储已经注册的事件
    /// &lt;/summary&gt;
    private static Dictionary&lt;MyEventType, IRegisterations&gt; mTypeEventDict 
        = new Dictionary&lt;MyEventType, IRegisterations&gt;();

    /// &lt;summary&gt;
    /// 注册事件
    /// &lt;/summary&gt;
    public static Subject&lt;object[]&gt; GetEvent(MyEventType type)
    &#123;

        IRegisterations registerations = null;

        if (mTypeEventDict.TryGetValue(type, out registerations))
        &#123;
            var reg = registerations as Registerations;
            return reg.Subject;
        &#125;
        else
        &#123;
            var reg = new Registerations();
            mTypeEventDict.Add(type, reg);
            return reg.Subject;
        &#125;
    &#125;

    /// &lt;summary&gt;
    /// 发送事件
    /// &lt;/summary&gt;
    public static void Send(MyEventType type, params object[] param)
    &#123;

        IRegisterations registerations = null;

        if (mTypeEventDict.TryGetValue(type, out registerations))
        &#123;
            var reg = registerations as Registerations;
            reg.Subject.OnNext(param);
        &#125;
    &#125;
    
&#125;
</code></pre>
<p>调用方法：</p>
<pre><code>MyEventSystem.Send(MyEventType.SelectNewPlayer, date);

MyEventSystem.GetEvent(MyEventType.SelectNewPlayer)
            .Subscribe(ChangePlayerShow)
            .AddTo(this);
</code></pre>
<h1 id="网络操作"><a href="#网络操作" class="headerlink" title="网络操作"></a>网络操作</h1><p>使用 ObservableWWW 进行异步网络操作。它的 Get/Post 方法返回可订阅(Subscribe)的 IObservables:  </p>
<pre><code>ObservableWWW.Get(&quot;http://google.co.jp/&quot;)
             .Subscribe(
                 x =&gt; Debug.Log(x.Substring(0, 100)), // onSuccess
                 ex =&gt; Debug.LogException(ex)); // onError
</code></pre>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 841774407@qq.com </span>
    </div>
	<div class="post-nav">
		
			<div class="post-nav-prev post-nav-item">
				<a href="/2019/09/21/%E5%85%B6%E4%BB%96/github-hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" >github+hexo博客搭建<i class="fa fa-chevron-left"></i></a>
			</div>
		
		
			<div class="post-nav-next post-nav-item">
			<a href="/2019/09/23/Unity/UGUI/" >UGUI<i class="fa fa-chevron-right"></i></a>
			</div>
		
	</div>
</article>


<p>
    <a href="javascript:void(0)" class="dashang" onclick="dashangToggle()">赏</a>
</p>


<div class="article_copyright">
    <p><span class="copy-title">文章标题:</span>UniRx入门</p>
    <p><span class="copy-title">文章字数:</span><span class="post-count">3.8k</span></p>
    <p><span class="copy-title">本文作者:</span><a href="javascript:void(0)" title="LianBai">LianBai</a></p>
    <p><span class="copy-title">发布时间:</span>2019-09-23, 09:00:31</p>
    <p><span class="copy-title">最后更新:</span>2021-12-27, 11:39:09</p>
    <span class="copy-title">原始链接:</span><a class="post-url" href="/2019/09/23/Unity/UniRx%E5%85%A5%E9%97%A8/" title="UniRx入门">http://yoursite.com/2019/09/23/Unity/UniRx%E5%85%A5%E9%97%A8/</a>
    <p>
        <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
    </p>
</div>





    








    </div>
    <div class="copyright">
        <p class="footer-entry">©2016-2019 lianbai</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" href="javascript:void(0)"></a>
    </div>
</div>
<div class="acParent"></div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close" href="javascript:void(0)" onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
<script src="/js/jquery.pjax.js?v=1.0.1" ></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['@脸白','#VR','#IOC','#NUnit','#UGUI','#Shader','#UniRx','#AR','#Odin Inspector','#插件','#Lua','#AssetBundle','#Unity编辑器扩展','#JSON','#Unity4IOS','#C#-Property','#海外Google','#Prefab','#XMind','#博客搭建','#LBFramework','#网址','#JAVA','#BAT','#git','#操作系统','#网络原理',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().split('\n').length - 1, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 492px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #fbf4a8;
    }
    
    

    /*列表样式*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    .post {
        background: url(http://file.liangxiegame.com/229fb8f1-d85a-417c-ac21-7b33f12f191f.png);
		background-size: cover;
		background: rgba(27,31,35,.05);
    }
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("http://file.liangxiegame.com/62f4f67f-3353-4bae-a348-860f5aaf71e3.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

</html>
